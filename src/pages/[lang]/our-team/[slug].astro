---
import Layout from "@/layouts/Layout.astro";
import {
  useTranslation,
  useTranslatedPath,
  slugify,
  translations,
  type Locale,
} from "@/i18n";
import Stars from "@/components/Stars.astro";

export async function getStaticPaths() {
  const paths = [];

  for (const lang of Object.keys(translations) as Locale[]) {
    const t = await translations[lang]();
    if (t.TEAM && t.TEAM.TEAM) {
      for (const member of t.TEAM.TEAM) {
        if (member.NAME) {
          paths.push({
            params: {
              lang: lang,
              slug: slugify(member.NAME),
            },
          });
        }
      }
    }
  }

  return paths;
}
const { lang, slug } = Astro.params;
if (!lang || !slug) {
  return new Response(null, { status: 404, statusText: "Not found" });
}
const i18n = await useTranslation(lang);
const member = i18n.TEAM.TEAM.find((member) => slugify(member.NAME) === slug);
if (!member) {
  return new Response(null, { status: 404, statusText: "Not found" });
}

const { NAME, POSITION, SEMBLANCE, IMG, NETWORKS } = member;
---

<Layout title={NAME}>
  <section
    class="mx-auto my-12 min-h-screen h-full flex items-center justify-center pt-20 lg:pt-12"
  >
    <div
      id="semblanza"
      class="w-screen relative flex flex-col glass-effect text-white left-0"
    >
      <div
        class="relative w-full lg:max-w-7xl mx-auto flex flex-col lg:flex-row items-center justify-end"
      >
        <div
          class="lg:absolute w-auto m-6 lg:w-1/3 aspect-[3/4] left-0 bg-gradient-to-t from-gray-400 to-white rounded-lg shadow-2xl overflow-hidden pointer-events-none"
        >
          <img
            src={IMG}
            alt={NAME}
            class="w-full h-full object-cover pointer-events-none"
          />
        </div>
        <div class="h-auto w-full lg:w-[60%] p-6">
          <h2 class="text-5xl lg:text-6xl my-2">
            <span class="text-[var(--color-title)]">+</span>
            {NAME}
          </h2>
          <!-- <h3 class="text-xl font-semibold text-gray-600 mb-2">{POSITION}</h3> -->
          <div class="rounded-full w-full h-0.5 bg-white my-4"></div>
          <p class="text-gray-200 mb-12 lg:mb-24 font-medium text-lg">
            {SEMBLANCE}
          </p>
          <div
            class="flex flex-col lg:flex-row w-full justify-between items-center gap-6"
          >
            <div class="flex flex-wrap gap-4">
              {
                NETWORKS.map((network) => (
                  <a
                    href={network.HREF}
                    class="group p-3 border-2 border-[var(--color-title)]/75 bg-transparent hover:bg-[var(--color-title)]/50 transition-all hover:scale-110 rounded-full h-14 aspect-square"
                    target="_blank"
                    rel="noopener noreferrer"
                  >
                    <img
                      src={network.ICON}
                      alt={network.TITLE}
                      class="w-full aspect-square object-contain transition group-hover:invert group-hover:brightness-0"
                    />
                  </a>
                ))
              }
            </div>
            <a
              data-aos="zoom-in"
              data-aos-duration="1000"
              href={useTranslatedPath(lang)("/") + "our-team"}
              class="group inline-flex items-center gap-4 hover:bg-[var(--color-title)] mx-auto lg:mx-0 px-6 py-4 border-2 border-[var(--color-title)] rounded-full w-fit font-semibold text-[var(--color-title)] hover:text-white transition-colors"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="fill-[var(--color-title)] group-hover:animate-bounce group-hover:fill-white w-5 h-5 -rotate-90 transition-all"
                viewBox="0 0 16 16"
              >
                <path
                  fill-rule="evenodd"
                  d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5"
                ></path>
              </svg>
              <span>{i18n.TEAM.BACK_BUTTON}</span>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="-z-10">
      <Stars />
    </div>
  </section>
</Layout>
