---
import Layout from "@/layouts/Layout.astro";
import {
  useTranslation,
  useTranslatedPath,
  slugify,
  translations,
  type Locale,
} from "@/i18n";

export async function getStaticPaths() {
  const paths = [];

  for (const lang of Object.keys(translations) as Locale[]) {
    const t = await translations[lang]();
    if (t.TEAM && t.TEAM.TEAM) {
      for (const member of t.TEAM.TEAM) {
        if (member.NAME) {
          paths.push({
            params: {
              lang: lang,
              slug: slugify(member.NAME),
            },
          });
        }
      }
    }
  }

  return paths;
}
const { lang, slug } = Astro.params;
if (!lang || !slug) {
  return new Response(null, { status: 404, statusText: "Not found" });
}
const i18n = await useTranslation(lang);
const member = i18n.TEAM.TEAM.find((member) => slugify(member.NAME) === slug);
if (!member) {
  return new Response(null, { status: 404, statusText: "Not found" });
}

const { NAME, POSITION, SEMBLANCE, IMG, NETWORKS } = member;
---

<Layout title={NAME}>
  <section
    class="mx-auto my-12 min-h-screen h-screen flex items-center justify-center px-6"
  >
    <div
      class="flex flex-col lg:flex-row gap-12 items-center max-w-6xl mx-auto"
    >
      <div
        class="w-full lg:w-1/3 bg-gradient-to-t from-gray-400 to-white rounded-lg shadow-lg overflow-hidden pointer-events-none"
      >
        <img
          src={IMG}
          alt={NAME}
          class="w-full h-auto object-cover pointer-events-none"
        />
      </div>
      <div class="w-full lg:w-2/3 flex flex-col text-white">
        <h2 class="text-4xl font-bold mb-2">{NAME}</h2>
        <h3 class="text-xl font-semibold text-white/75 mb-4">{POSITION}</h3>
        <p class="text-white/75 mb-20">{SEMBLANCE}</p>
        <div class="flex flex-col lg:flex-row w-full justify-between items-center">
          <div class="flex flex-wrap gap-4">
            {
              NETWORKS.map((network) => (
                <a href={network.HREF} class="p-3 border-2 border-white/75 bg-transparent hover:bg-white/25 transition-all hover:scale-110 rounded-full h-14 aspect-square" target="_blank" rel="noopener noreferrer">
                  <img src={network.ICON} alt={network.TITLE} class="w-full aspect-square object-contain" />
                </a>
              ))
            }
          </div>
          <a
            data-aos="zoom-in"
            href={useTranslatedPath(lang)("/") + "our-team"}
            class="group inline-flex items-center gap-4 hover:bg-[var(--color-title)] mx-auto lg:mx-0 px-6 py-4 border border-[var(--color-title)] rounded-full w-fit font-semibold text-[var(--color-title)] hover:text-black transition-colors"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="fill-white group-hover:fill-black w-5 h-5 -rotate-90 transition-all"
              viewBox="0 0 16 16"
            >
              <path
                fill-rule="evenodd"
                d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5"
              ></path>
            </svg>
            <span>{i18n.TEAM.BACK_BUTTON}</span>
          </a>
        </div>
      </div>
    </div>
  </section>
</Layout>
